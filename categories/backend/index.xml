<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Backend on Welcome to Bertsin Homepage!</title><link>https://user-xixiboliya.github.io/categories/backend/</link><description>Recent content in Backend on Welcome to Bertsin Homepage!</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Fri, 17 Jan 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://user-xixiboliya.github.io/categories/backend/index.xml" rel="self" type="application/rss+xml"/><item><title>存储系统基础</title><link>https://user-xixiboliya.github.io/post/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%9F%BA%E7%A1%80/</link><pubDate>Fri, 17 Jan 2025 00:00:00 +0000</pubDate><guid>https://user-xixiboliya.github.io/post/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%9F%BA%E7%A1%80/</guid><description>&lt;p>存储系统分为四类：&lt;/p>
&lt;ul>
&lt;li>单机存储 File-system Key-Value&lt;/li>
&lt;li>单机数据库 关系型和非关系型&lt;/li>
&lt;li>分布式存储 分布式文件系统GFS HDFS等 对象存储TOS&lt;/li>
&lt;li>分布式数据库：关系型(MySQL Oracle)和非关系型数据库
&lt;img src="attachment/2fe4cb8f650425e13a28cea09cab648c.png" alt="">&lt;/li>
&lt;/ul>
&lt;h1 id="分布式存储选型">
&lt;a class="header-anchor" href="#%e5%88%86%e5%b8%83%e5%bc%8f%e5%ad%98%e5%82%a8%e9%80%89%e5%9e%8b">&lt;/a>
分布式存储选型
&lt;/h1>&lt;p>&lt;img src="attachment/ea14c570671bd78031d891aa1ae06de6.png" alt="">
&lt;img src="attachment/544c6d6234371abea3cc0ed7edecd847.png" alt="">
在TOS中，所有的数据都存储在“桶”中。桶是容器，可以理解为用于组织存储对象的命名空间。每个桶都具有唯一的名字，并可以设置权限来控制谁可以访问。
&lt;img src="attachment/306e5e5c965c370fefe58da2883ab8ee.png" alt="">&lt;/p>
&lt;h1 id="存储对象使用">
&lt;a class="header-anchor" href="#%e5%ad%98%e5%82%a8%e5%af%b9%e8%b1%a1%e4%bd%bf%e7%94%a8">&lt;/a>
存储对象使用
&lt;/h1>&lt;p>先在TOS上申请一个Bucket，里面可以存放很多objects。此外，TOS提供了丰富的RESTful API，可以实现文件的上传、下载、删除、查询等操作。&lt;/p>
&lt;p>对象存储对外提供的一般都是Restful风格的接口。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>restful风格&lt;span style="color:#960050;background-color:#1e0010">：&lt;/span>[&lt;span style="color:#960050;background-color:#1e0010">参考链接&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>](https:&lt;span style="color:#75715e">//zhuanlan.zhihu.com/p/334809573)、[参考链接2](https://www.runoob.com/w3cnote/restful-architecture.html)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">以资源为基础&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">：资源可以是一个图片、音乐、一个&lt;/span>XML格式&lt;span style="color:#960050;background-color:#1e0010">、&lt;/span>HTML格式或者JSON格式等网络上的一个实体&lt;span style="color:#960050;background-color:#1e0010">，除了一些二进制的资源外普通的文本资源更多以&lt;/span>JSON为载体&lt;span style="color:#960050;background-color:#1e0010">、面向用户的一组数据&lt;/span>(&lt;span style="color:#960050;background-color:#1e0010">通常从数据库中查询而得到&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>RESTful风格的API则要求在URL上都以名词的方式出现&lt;span style="color:#960050;background-color:#1e0010">，从几种请求方式上就可以看出想要进行的操作，这点与非&lt;/span>RESTful风格的API形成鲜明对比&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">统一接口&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">对资源的操作包括获取、创建、修改和删除，这些操作正好对应&lt;/span>HTTP协议提供的GET&lt;span style="color:#960050;background-color:#1e0010">、&lt;/span>POST&lt;span style="color:#960050;background-color:#1e0010">、&lt;/span>PUT和DELETE方法&lt;span style="color:#960050;background-color:#1e0010">。换言而知，使用&lt;/span>RESTful风格的接口但从接口上你可能只能定位其资源&lt;span style="color:#960050;background-color:#1e0010">，但是无法知晓它具体进行了什么操作，需要具体了解其发生了什么操作动作要从其&lt;/span>HTTP请求方法类型上进行判断&lt;span style="color:#960050;background-color:#1e0010">。具体的&lt;/span>HTTP方法和方法含义如下&lt;span style="color:#960050;background-color:#1e0010">：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">-&lt;/span> GET&lt;span style="color:#960050;background-color:#1e0010">（&lt;/span>SELECT&lt;span style="color:#960050;background-color:#1e0010">）：从服务器取出资源（一项或多项）。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">-&lt;/span> POST&lt;span style="color:#960050;background-color:#1e0010">（&lt;/span>CREATE&lt;span style="color:#960050;background-color:#1e0010">）：在服务器新建一个资源。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">-&lt;/span> PUT&lt;span style="color:#960050;background-color:#1e0010">（&lt;/span>UPDATE&lt;span style="color:#960050;background-color:#1e0010">）：在服务器更新资源（客户端提供完整资源数据）。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">-&lt;/span> PATCH&lt;span style="color:#960050;background-color:#1e0010">（&lt;/span>UPDATE&lt;span style="color:#960050;background-color:#1e0010">）：在服务器更新资源（客户端提供需要修改的资源数据）。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">-&lt;/span> DELETE&lt;span style="color:#960050;background-color:#1e0010">（&lt;/span>DELETE&lt;span style="color:#960050;background-color:#1e0010">）：从服务器删除资源。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="attachment/2c1b089c1aeef36efa097e0a7e31e4b5.png" alt="">&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@PutMapping&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/dogs/{id}&amp;#34;&lt;/span>) &lt;span style="color:#75715e">//`@PutMapping(&amp;#34;/dogs/{id}&amp;#34;)`：这是Spring注解，它将HTTP请求（路径为`/dogs/{id}`的PUT请求）与 `updateDog()` 方法绑定。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span> ResponseEntity&lt;span style="color:#f92672">&amp;lt;&lt;/span>String&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#a6e22e">updateDog&lt;/span>(&lt;span style="color:#a6e22e">@PathVariable&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> id, &lt;span style="color:#a6e22e">@RequestBody&lt;/span> Dog dog) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dog.&lt;span style="color:#a6e22e">setId&lt;/span>(id); &lt;span style="color:#75715e">// 设置ID&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">boolean&lt;/span> isSuccess &lt;span style="color:#f92672">=&lt;/span> dogMapper.&lt;span style="color:#a6e22e">updateDog&lt;/span>(dog);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (isSuccess) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> ResponseEntity&lt;span style="color:#f92672">&amp;lt;&amp;gt;&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Dog updated successfully&amp;#34;&lt;/span>, HttpStatus.&lt;span style="color:#a6e22e">OK&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> ResponseEntity&lt;span style="color:#f92672">&amp;lt;&amp;gt;&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Failed to update dog&amp;#34;&lt;/span>, HttpStatus.&lt;span style="color:#a6e22e">BAD_REQUEST&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>} 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="multiupload-接口">
&lt;a class="header-anchor" href="#multiupload-%e6%8e%a5%e5%8f%a3">&lt;/a>
MultiUpload 接口
&lt;/h2>&lt;p>对于GB数据大对象：
&lt;img src="attachment/d5ba229bc15946a82b98b3fd154f5022.png" alt="">&lt;/p></description></item></channel></rss>